import UIKit

/*
 * Day 3: Toboggan Trajectory
 */

class Solution {
    
    func result(_ input: String) -> Int {
        return trees(for: input, deltaX: 3, deltaY: 1)
    }
    
    func trees(for input: String, deltaX: Int, deltaY: Int) -> Int {
        var x: Int = 0
        var y: Int = 0
        var count: Int = 0
        
        let rows = input.components(separatedBy: "\n")
        guard let columns = rows.first?.count else {
            fatalError("Input is invalid")
        }
        
        while y < rows.count {
            let row = rows[y]
            let c = row[row.index(row.startIndex, offsetBy: x)]
            if c == "#" {
                count += 1
            }
            x += deltaX
            if x >= columns {
                x -= columns
            }
            y += deltaY
        }
        
        return count
    }
}

let sol = Solution()
sol.result(
    """
    ..#......###....#...##..#.#....
    .#.#.....#.##.....###...##...##
    ..#.#..#...........#.#..#......
    ..#......#..........###........
    ...#..###..##.#..#.......##..##
    ......#.#.##...#...#....###....
    ..........##.....##..##......#.
    ......#...........#............
    #....#..........#..............
    .#........##.............###.##
    ....#.........#.......#.#....##
    #.#..#..#..#.......#...#....##.
    .#........#......#.##.......#..
    ..#.....#####.....#....#..#..##
    .......#..##.......#......#.###
    ..#.#...#......#.##...#........
    ##...................#...##..#.
    ......#...#.##...##.#......#..#
    .#.................#..##...#...
    ...#.....#.......##.....#.#....
    .......#.#......#.....#..#..##.
    ..........#........#...........
    ..#.#..........................
    .#.##..#.#...#...#.........#...
    .....#....#.....#..#.....#.....
    ...#.#.#.....#.#..#.......#..#.
    .....#...###...##...#......##..
    #.###......#.#...#.#.#..###....
    #.....#..##......#..........#.#
    #...............#........#.#..#
    .....#..#.........#......##.#..
    .....#.##.##..#..##............
    ...#......##...............#.#.
    .#..#.#............##.#........
    #.....#..###.............##.#..
    ...##..#.#..#...........#..#...
    #....#.........#.#.............
    ##.#.........#..###......#.#..#
    ...#...#......#.#.#.##..#.##...
    .....##............#.##.##..#..
    ....#................#.##..#..#
    ...#..#.......#...#..#........#
    ....#...#...#................#.
    ....##...............#.#...#...
    .#.....###...#.......#.##......
    ....######.#..............###.#
    .#..#.........##...............
    ................##.#..#....###.
    .......#............#.#..#..#..
    ......#.#...............##.#...
    ...#..####.#...#..#..#......#..
    ....#.#...#.....#.........#..##
    .##..#...#......##....##.#.#...
    .##.#.........##...#....#......
    ..#.#..#...#.#..#.......#...#.#
    .........#..#.....##..#........
    ..#......#..##.....#..#...###..
    ..#...#....#.#..#..#.#.#..#.#..
    ...#..#####.....#......#.......
    #.#............#......#..#...#.
    .........#..........###.......#
    ......#....#..#.##.#......#..#.
    ...........##.#....#.#..#......
    ..#...................#..#.#...
    #....##.............##....#...#
    ##..#....#.........#..........#
    ....#.#.#...#..#........#.##..#
    ...............#...#..##..#....
    .##.......#.......#...........#
    #.........................##...
    #........#.#..#..##..####.#....
    ...................##.....###..
    .#.......#..#......#......#...#
    ..#.........#...#..........#...
    ..........#......#....#........
    .#......#..#...#..#...##....##.
    ...#.#..#..#......#.....##.####
    .......#.#....#.......#........
    #...#.#...##..##.#......#......
    .#.........#...................
    ...#..........#.#......#.......
    ...#.....##....#..........#....
    .#..........##..#..#..##....#.#
    .##.#..........#...#.##.......#
    #...###....#..#.#...#..#.......
    ..................##...........
    ..#...##.#...........#....#.##.
    ..#......#..##..#....##..#...#.
    ..#....#.....#.##..#.......#..#
    #...#....#..#.#....#......##...
    .......##..#..........#........
    ..#.............##.#.....#...#.
    ...............#....#...#...##.
    ##...........#.......#.##......
    #..#...........#.........#.....
    ....###.............###.##..##.
    .........#.#.....###.......#...
    ..#.##....#.#..........#....#..
    #........#....##...#..#........
    ......#..........###..#.#......
    .....#.#......##.....#..##...#.
    .#.......#......#...#...#...#.#
    .#..........##.......#.....##.#
    ###.#...#....#.....#...#......#
    ..#.#.#..#.##.#..#.............
    .....#.........................
    .#..###..#...#...#..#..#...#.#.
    #................##...##.##....
    ......#...#...#..........#...#.
    ..........#.....##.............
    ..#.#......#........#.......#..
    ........##.............#.......
    .......#......#.##.#..#........
    #.#.#....#........#..........#.
    ##..##......#..#..#.....#.#..##
    ##..#..........#...............
    #.....##...#.#......#.......#.#
    #.....#...#....#..#.....##.....
    ##..........#.#.....#....#...##
    ..##.###..#.....#.......#...#..
    .#.#.......#......###........#.
    .#..............#.#..###.......
    .#....#..##.........#..#.#.....
    ....#....#.#....#..#.......##.#
    #.......#.......#.........#....
    ...#....#....#.....##..#..#.#.#
    ........#....#...........#.....
    .#......##.#.#.##..............
    #..#.#.....##........#........#
    ##...#.#.......##.......#...#..
    #...#.....#.##...##.#.....#....
    ....#..##...#........#.#...#...
    ...#....#.#.#..###...##.#.....#
    ......#..#.....#..#........##..
    .......#.....#.#.........#.#..#
    ..#.......#.#.#.#.#....#.##...#
    .#...#........#..##..#......#..
    .#..#............#...#..#.#....
    ...##......#......#............
    ..#...#.#.....#.....#..##.#....
    .#......#.#......#..#.#........
    ..#..........##...#.#.....#..#.
    #...#.....#..#...#.............
    ..##.................#....#....
    .#....#.......#..##....#......#
    .#....###............##....##.#
    ##..#........#..#...#.......#..
    .....#.....#.#.#.##.........#..
    .......#..#....#...#...#.......
    ...#...#...#.#.#..#.#.....#....
    #.#........#..#.##..#..###.....
    ..................#..#.........
    #.#.....#..##.........#.......#
    ###..#.......#..............#..
    ......#..#.....###..........#..
    ....#.#...#..#...........#.#...
    ...#.....#.......#.....#.#.....
    #.....##..#......##...........#
    #...###...........##..#...#.##.
    ......##.##.#...#..#....#......
    ...#.#......##.#......##....#.#
    ..............#.#.###.......#..
    ........#....#.......##..#..###
    ...#.....##.#....#......##..#.#
    ..##........#.....#.#..#...#...
    .#..#.##.........#.....#...#..#
    ..#..#....#...........#........
    .#...#....................#....
    ##.....##....#.............#.#.
    ....#.#..#.#..#.#.#..........##
    .............##.#.....#..#..#..
    .#....#.....##...#.###.........
    ..#........#........#.#..###...
    .##....#...#...#.......#...#.#.
    ..#...#...#..##........#..#....
    ..##.#..#..#.....#......#.#..#.
    .#........#..#....#..#.........
    ..#.#.....#.##..#........###.#.
    .....#.##.....##.#.............
    #.........#.......#...##...#...
    ..#.##.#..#..#............#....
    .##....#..#............#.....#.
    ###........##.....##.#...#.....
    #......##..##.#.#.#.#.#.#..##..
    .....###.....#....#......#....#
    ........#.........##...#....#.#
    .#.#.....#.#..#..##......#...#.
    ...#.##....#..#.###..#..##.....
    ....#..........##..#..#..#..#..
    ...#..#.##..#..#....#.........#
    .....#..###.#.....#.....#..#...
    ......#...#....#.##...#.#......
    .#.###..##.....##.##......##...
    .....#.#...........#.#.........
    #........#...#..#......##.#....
    ..#.......##....##....#.##.#..#
    ...###.#.........#......#.....#
    ..#.##..#....#.....##...#.##...
    ....##.##.............#...#....
    ##..#...#..#..#..#.............
    .....#.....#.....#.............
    ...#.##.......#..#.#.....#....#
    #.....##.........#......##.....
    .....##..........#..#...#..#...
    #...###....#.......#...##......
    .#....#..#......#.....#...#.#..
    #........#.#.#...#.....###.#.##
    ##...#...##..#..#....#.........
    ....#............#..#.....#....
    #......#.........##....#.......
    .#..#..#........#.............#
    .##..........#......#.......#..
    #............#..#....#.........
    ....#.#.....#.##...#.....#.#...
    ...#.#..#...##..#...#.#.#......
    #....#..#.........##..#.#.#..##
    .#...#..............#.......#..
    #...#.....#.#........##......##
    ...#....##.####.#.........#.#.#
    ....###.#..#............#.#..#.
    ....#......#...#......##.#.#.#.
    .....#..#.#.##.#...##..........
    ##..#...#.#...###.............#
    ....#...#..#.....#.#..#..#..#..
    #..........####......#.....###.
    .........#........#.##.#...#...
    .........#..........#.#..###...
    .....##........##.........#...#
    ..##....#...#.......##.........
    .....#.#......##....#...#...#..
    .##..#..##.....................
    .......#...#..#..#...##....#...
    .#...#.......###...#..#..#.....
    .......#.....##.##.#.......#..#
    .##......#...#....#..#......##.
    .##....#..#....#...#...#.......
    .........##..#..#.#.#.....##...
    ...#..............#..#.....####
    .#.#.#..#.......#.......#......
    ..#.#......#..........#........
    .#...#.#..#.......#..#..#..#...
    .......##.#...#..#....#.....#..
    .##...##....##...#........####.
    ....#.#..##....#...#....#.#....
    .....#.....#..#..#.#.##..#.....
    ..#....#..............#....#...
    ..#.#.#.....##.#.....#..##.....
    ....#.....#....#...#...#..#.#..
    #...#...........#..#..#........
    ...#.#..#.........##.#...#..##.
    ......#.#.........#.#...#......
    ......#..##.###......##.#....#.
    .....#...#..#.......#..........
    .#...#.......#.....###......#..
    ...........##.....#..#..#....#.
    ..#....#..#...#......#.......#.
    ..#...#...#.#..#....#...#......
    .......#....###.####...###.#...
    #.##.#.......#.......#....#.#.#
    .##..........#.....#..###......
    .....#...........#.##..#....#..
    ........##.....#.#........##...
    #..#..#..................##....
    #...###..........#.............
    .......#.#.......#.#.......##..
    .....#.#...#....#...####.....#.
    ..##.....##.......#....#.......
    ##..........#...#..##....##....
    ..........#..#......#........#.
    ##..#....#..#....#.....##....#.
    ##.##.....#...##.##.......#....
    ..#..#.###.#..##.#..#..#...#...
    .#..#.....#........#...##.#....
    ..#..#.....#.#......##.#.#.....
    .#..##...#.#....#...#...#.#.##.
    .........#...#....###.#.....#..
    ...........###.#.#..#..#...#.#.
    ##...#......##...........#..#..
    .........##..#...#.......#.....
    #......#.#..........#..#.......
    ...#.................#....#....
    #....#......................##.
    ##.......#..#......#.#...###.#.
    ..#....#..#.#......#...........
    ...#...........###.#.#.........
    ..#..##.....#.....##...##......
    ..#..#.#.#.#..#..#..##....#...#
    #......##.....##..##.##...#....
    #.....#.....#.#........#.......
    .#.....#.................#....#
    .###....#...#............#.#.#.
    .#...#.#......#.#..............
    ....#...#......#.....#.......#.
    ........#.....#..........#....#
    #..#......#...#...#.........#..
    #....#......#...##.#...#...#...
    #...#....#....#..#..#.....#..#.
    #......##..#..#.#.#..#.#.......
    ..#..#...............#...##...#
    ............#..............#.##
    .#.#.#......##.......#.......#.
    ....#.........##.......#...###.
    .......#.#...#.#.#.......#.....
    ....#..#..#...#....#.##.#.##...
    ...##.##.#...#......#..........
    #.....#...#.#...#.##..##.#.....
    .......#.....#...#.#...##.#....
    .#.............#.....#....##..#
    ##......#.......#...#....#.....
    .###......#.................#..
    #.#......##.........##..#......
    ...#....#..........#.#.........
    ..##..#.........#..............
    .....#...#..................#.#
    .............#.........#...#..#
    ....#....#......#.#.......#...#
    #..#............#.#.......#...#
    ..#.....#............#.........
    .#.....................###....#
    ........#.####.........#.#.#...
    #...........##...#.........#..#
    ...........#..#......#...#.#...
    ....##...##.....#.....#........
    """
)
